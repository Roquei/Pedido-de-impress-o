<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Pedido de Impress√£o</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1 class="titulo">üñ®Ô∏è Formul√°rio de Pedido de Impress√£o</h1>

        <div class="form-container">
            <form method="POST" enctype="multipart/form-data">
                <label>Setor:</label>
                <select name="setor" id="setor" required onchange="atualizarTurmas()">
                    <option value="">Selecione o setor</option>
                    <option value="Infantil">Educa√ß√£o Infantil</option>
                    <option value="Anos Iniciais">Anos Iniciais</option>
                    <option value="Anos Finais">Anos Finais</option>
                    <option value="Ensino M√©dio">Ensino M√©dio</option>
                    <option value="Administrativo">Administrativo</option>
                </select><br><br>
                
                <label>Turma:</label>
                <select name="turma" id="turma" required>
                    <option value="">Selecione a turma</option>
                </select><br><br>

                <label>Tipo de Impress√£o:</label><br>
                <input type="radio" name="tipo" value="Colorida (todas as p√°ginas)" onchange="mostrarCampoPaginas(false)"> Colorida (todas as p√°ginas)<br>
                <input type="radio" name="tipo" value="Parcialmente colorida" onchange="mostrarCampoPaginas(true)"> Colorida (parcial)<br>
                <input type="radio" name="tipo" value="Preto e Branco" onchange="mostrarCampoPaginas(false)"> Preto e Branco<br><br>

                <div id="paginasColoridas" style="display:none;">
                    <label>Informe os n√∫meros das p√°ginas coloridas (ex: 1, 3, 7):</label>
                    <input type="text" name="coloridas_paginas">
                </div><br>

                <label>Quantidade de c√≥pias:</label>
                <input type="number" name="copias" required min="1" max="1000" value="1">

                <label>Tamanho do papel:</label>
                <select name="tamanho" required>
                    <option>A4</option>
                    <option>A3</option>
                </select>

                <label>Tipo de folha:</label>
                <select name="papel" required>
                    <option>Sulfite</option>
                    <option>Opaline</option>
                    <option>Alaska</option>
                    <option>Canson</option>
                    <option>Matema</option>
                    <option>Etiqueta</option>
                </select>

                <label>Acabamento:</label><br>
                <label><input type="checkbox" name="frente_verso"> Frente e Verso</label>
                <label><input type="checkbox" name="encadernacao"> Encaderna√ß√£o</label>
                <label><input type="checkbox" name="plastificacao"> Plastifica√ß√£o</label>

                <label>Data desejada para entrega:</label>
                <input type="date" name="data_entrega" id="data_entrega" required><br><br>

                <label>Seu nome:</label>
                <input type="text" name="nome" required>

                <label>Seu e-mail:</label>
                <input type="email" name="email" required>

                <label>Arquivo (PDF, JPG ou PNG):</label>
                <input type="file" name="arquivo" accept=".pdf, .jpg, .jpeg, .png" multiple required><br><br>

                <button type="submit">Enviar Pedido</button>
            </form>
        </div>
    </div>

    <script>
        window.onload = function () {
            const dataInput = document.getElementById("data_entrega");
            const hoje = new Date();
            hoje.setDate(hoje.getDate() + 2); // adiciona 2 dias

            const ano = hoje.getFullYear();
            const mes = String(hoje.getMonth() + 1).padStart(2, '0');
            const dia = String(hoje.getDate()).padStart(2, '0');
            const dataMinima = `${ano}-${mes}-${dia}`;

            dataInput.min = dataMinima;
        }

        function mostrarCampoPaginas(mostrar) {
            const div = document.getElementById('paginasColoridas');
            div.style.display = mostrar ? 'block' : 'none';
        }

        function atualizarTurmas() {
            const setor = document.getElementById('setor').value;
            const turmaSelect = document.getElementById('turma');

            const turmasPorSetor = {
                'Infantil': ['Infantil 2', 'Infantil 3', 'Infantil 4', 'Infantil 5'],
                'Anos Iniciais': ['1¬∫ ano', '2¬∫ ano', '3¬∫ ano', '4¬∫ ano', '5¬∫ ano'],
                'Anos Finais': ['6¬∫ ano', '7¬∫ ano', '8¬∫ ano', '9¬∫ ano'],
                'Ensino M√©dio': ['1¬™ s√©rie', '2¬™ s√©rie', '3¬™ s√©rie'],
                'Administrativo': ['Atendimento', 'Comunica√ß√£o', 'Coordea√ß√£o', 'Financeiro',
                                   'Recursos Humanos', 'Pastoral', 'Secretaria', 'Servi√ßos Gerais', 'TI']
            };

            // Limpa as op√ß√µes anteriores
            turmaSelect.innerHTML = '<option value="">Selecione a turma</option>';

            if (turmasPorSetor[setor]) {
                turmasPorSetor[setor].forEach(turma => {
                    const option = document.createElement('option');
                    option.value = turma;
                    option.textContent = turma;
                    turmaSelect.appendChild(option);
                });
            }
        }
    </script>
</body>
</html>
